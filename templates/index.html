<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telekinesis - P2P File Transfer</title>
    <link rel="stylesheet" href="/static/main_style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/favicon/site.webmanifest">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-share-alt"></i>
                <h1>Telekinesis</h1>
            </div>
            <p class="subtitle">Keeping it together</p>
        </header>

        <!-- Connection Status -->
        <div class="status-bar" id="statusBar">
            <div class="status-indicator" id="statusIndicator">
                <i class="fas fa-circle"></i>
                <span id="statusText">Disconnected</span>
            </div>
            <button class="disconnect-btn" id="disconnectBtn" style="display: none;">
                <i class="fas fa-times"></i> Disconnect
            </button>
            <button class="disconnect-btn" id="resetBtn" style="display: none;">
                <i class="fas fa-refresh"></i> Start New Connection
            </button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Connection Setup Section -->
            <div class="section" id="connectionSection">
                <h2><i class="fas fa-plug"></i> Room Connection</h2>
                <p class="section-description">Create or join a room to connect with another peer</p>
                
                <!-- User Name Input -->
                <div class="input-group">
                    <label for="userNameInput">Your Name:</label>
                    <input type="text" id="userNameInput" placeholder="Enter your name..." maxlength="20" required>
                </div>
                
                <!-- Room Name Input -->
                <div class="input-group">
                    <label for="roomNameInput">Room Name:</label>
                    <input type="text" id="roomNameInput" placeholder="Enter room name..." maxlength="20" required>
                </div>
                
                <div class="button-row">
                    <button class="btn btn-primary" id="createRoomBtn">
                        <i class="fas fa-plus"></i> Create Room
                    </button>
                    <button class="btn btn-secondary" id="joinRoomBtn">
                        <i class="fas fa-sign-in-alt"></i> Join Room
                    </button>
                </div>

                <!-- Room Status Display -->
                <div class="room-status" id="roomStatus" style="display: none;">
                    <h3 id="roomStatusTitle">Room Status</h3>
                    <div class="room-info">
                        <p><strong>Room:</strong> <span id="currentRoomName"></span></p>
                        <p><strong>Status:</strong> <span id="connectionStatus">Connecting...</span></p>
                    </div>
                    <div class="room-instructions" id="roomInstructions">
                        <p>Share this room name with the other person:</p>
                        <div class="room-name-display">
                            <span id="shareableRoomName"></span>
                            <button class="btn btn-outline btn-sm" id="copyRoomNameBtn">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- File Transfer Section -->
            <div class="section" id="transferSection" style="display: none;">
                <h2><i class="fas fa-exchange-alt"></i> File Transfer</h2>
                
                <!-- File Upload -->
                <div class="transfer-card">
                    <h3><i class="fas fa-upload"></i> Send File</h3>
                    <div class="file-upload-area" id="fileUploadArea">
                        <input type="file" id="fileInput" hidden>
                        <div class="upload-placeholder">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Click to select a file or drag and drop</p>
                            <span class="file-types">Any file type supported</span>
                        </div>
                        <div class="selected-file" id="selectedFile" style="display: none;">
                            <i class="fas fa-file"></i>
                            <span class="file-name" id="fileName"></span>
                            <span class="file-size" id="fileSize"></span>
                            <button class="btn btn-primary" id="sendFileBtn">
                                <i class="fas fa-paper-plane"></i> Send File
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Transfer Progress -->
                <div class="progress-card" id="progressCard" style="display: none;">
                    <h3 id="progressTitle">Transfer Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-info">
                        <span id="progressText">0%</span>
                        <span id="progressStatus">Preparing...</span>
                    </div>
                </div>

                <!-- Received Files -->
                <div class="transfer-card">
                    <h3><i class="fas fa-inbox"></i> Received Files</h3>
                    <div class="received-files" id="receivedFiles">
                        <div class="empty-state">
                            <i class="fas fa-folder-open"></i>
                            <p>No files received yet</p>
                            <span>Files will appear here when received</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Section -->
            <div class="section" id="chatSection" style="display: none;">
                <h2><i class="fas fa-comments"></i> Chat</h2>
                <div class="chat-card">
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-message system">
                            <i class="fas fa-info-circle"></i>
                            <span>Connected! You can now send files and messages.</span>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" id="messageInput" placeholder="Type a message..." maxlength="500">
                        <button class="btn btn-outline" id="sendMessageBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loadingText">Loading...</p>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification" style="display: none;">
        <div class="notification-content">
            <i class="notification-icon"></i>
            <span class="notification-text"></span>
            <button class="notification-close">&times;</button>
        </div>
    </div>

    <script src="/static/main_script.js"></script>
</body>
</html>
